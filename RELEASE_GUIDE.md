# 智能笔记管理器 - 发布打包指南

## 打包脚本说明

项目提供了两个打包脚本，适用于不同的使用场景：

### 1. release.bat - 完整版打包脚本

**功能特点：**
- 自动生成版本号（基于当前时间）
- 完整的目录结构创建
- 自动构建生产版CSS
- 创建Windows和Linux启动脚本
- 生成详细的README和配置文档
- 自动创建压缩包（如果安装了7zip）
- 完整的错误检查和提示

**使用方法：**
```cmd
release.bat
```

**输出目录：**
```
release/note-ai-manager-v20241201_1430/
├── backend/           # 后端代码
├── frontend/          # 前端代码
├── data/             # 数据库文件
├── notes/            # 笔记文件
├── start.bat         # Windows启动脚本
├── start.sh          # Linux启动脚本
├── README.md         # 发布说明
└── note-ai-manager-v20241201_1430.zip  # 压缩包
```

### 2. release-simple.bat - 简化版打包脚本

**功能特点：**
- 快速打包，适合开发测试
- 最小化文件复制
- 基本的启动脚本生成
- 适合内部使用

**使用方法：**
```cmd
release-simple.bat
```

## 环境要求

### 必需环境
- Python 3.10+
- Node.js 16+
- Windows系统（批处理脚本）

### 可选工具
- 7zip（用于创建压缩包）

## 打包前准备

1. **确保项目完整**
   - 所有代码文件已保存
   - 前端样式已构建
   - 数据库文件完整

2. **检查依赖**
   ```cmd
   # 检查Python环境
   python --version
   
   # 检查Node.js环境
   node --version
   npm --version
   ```

3. **测试运行**
   ```cmd
   # 测试开发环境
   run.bat
   ```

## 发布流程

### 1. 执行打包
```cmd
# 使用完整版打包
release.bat

# 或使用简化版打包
release-simple.bat
```

### 2. 验证打包结果
- 检查发布目录是否完整
- 确认所有必要文件已复制
- 验证启动脚本是否正确

### 3. 测试生产环境
```cmd
# 进入发布目录
cd release\note-ai-manager-v[版本号]

# 运行启动脚本
start.bat
```

### 4. 分发部署
- 将整个发布目录或压缩包分发给用户
- 提供使用说明和注意事项

## 版本管理

### 版本号规则
- 格式：`vYYYYMMDD_HHMM`
- 示例：`v20241201_1430`
- 基于构建时间自动生成

### 版本记录
建议在每次发布时记录：
- 版本号
- 发布时间
- 主要功能更新
- 已知问题和限制

## 部署说明

### 用户部署步骤

1. **解压文件**
   ```cmd
   # 解压到目标目录
   unzip note-ai-manager-v[版本号].zip
   cd note-ai-manager-v[版本号]
   ```

2. **启动应用**
   ```cmd
   # Windows
   start.bat
   
   # Linux/macOS
   chmod +x start.sh
   ./start.sh
   ```

3. **访问应用**
   - 打开浏览器访问：http://127.0.0.1:8000
   - 首次使用需要配置API连接信息

### 部署注意事项

1. **环境要求**
   - 确保目标机器已安装Python 3.10+
   - 确保网络连接正常（用于AI功能）

2. **权限设置**
   - 确保应用有读写权限
   - 数据库和笔记文件目录需要写权限

3. **防火墙设置**
   - 确保8000端口可访问
   - 如需外部访问，修改启动脚本中的host设置

## 故障排除

### 常见问题

1. **Python环境问题**
   ```
   错误：未找到 Python
   解决：安装Python并添加到PATH环境变量
   ```

2. **Node.js环境问题**
   ```
   错误：未找到 Node.js
   解决：安装Node.js并添加到PATH环境变量
   ```

3. **依赖安装失败**
   ```
   错误：依赖安装失败
   解决：检查网络连接，尝试使用国内镜像源
   ```

4. **端口占用问题**
   ```
   错误：端口8000被占用
   解决：修改启动脚本中的端口号
   ```

### 日志查看
- 启动脚本会显示详细的安装和启动日志
- 如有问题，请查看控制台输出的错误信息

## 维护建议

1. **定期更新**
   - 定期更新依赖包版本
   - 及时修复安全漏洞

2. **备份策略**
   - 定期备份数据库文件
   - 备份重要的笔记文件

3. **监控运行**
   - 监控应用运行状态
   - 记录错误日志

## 技术支持

如遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查项目README文档
3. 查看控制台错误信息
4. 联系开发者获取支持
